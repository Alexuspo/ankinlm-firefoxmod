var content=(function(){"use strict";function ne(r){return r}function j(r){return!!(r&&typeof r=="object"&&"quiz"in r&&Array.isArray(r.quiz))}function D(r){return!!(r&&typeof r=="object"&&"flashcards"in r&&Array.isArray(r.flashcards))}const L=r=>{const e=JSON.parse(r),n=[];function o(i){const m=i.replace(/"/g,'""');return/[\t\n"]/.test(m)?`"${m}"`:m}if(D(e))for(const i of e.flashcards){const m=o(i.f),d=o(i.b);n.push(`${m}	${d}`)}if(j(e))for(const i of e.quiz){const m=i.answerOptions.find(p=>p.isCorrect);if(!m)continue;const d=o(i.question),b=o(m.text);n.push(`${d}	${b}`)}if(n.length)return n.join(`
`)},W=r=>{const e=L(r);if(!e)return;const n="\uFEFF";return new Blob([n+e],{type:"text/csv;charset=utf-8"})},V={matches:["https://notebooklm.google.com/*"],allFrames:!0,main(){let r=null,e=null;window.addEventListener("message",i=>{i.data?.type!=="NOTEBOOKLM_DATA"||typeof i.data.data!="string"||(r=i.data.data,n())});function n(){if(e||!r)return;e=document.createElement("div"),e.style.position="fixed",e.style.right="24px",e.style.bottom="24px",e.style.zIndex="99999",e.style.display="flex",e.style.gap="8px",e.style.padding="8px 12px",e.style.borderRadius="999px",e.style.background="#202124",e.style.boxShadow="0 2px 8px rgba(0,0,0,0.4)",e.style.color="#fff",e.style.fontFamily='system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif';const i=document.createElement("button");i.textContent="Copy CSV",o(i),i.addEventListener("click",async()=>{if(!r)return;const d=L(r);if(d)try{await navigator.clipboard.writeText(d)}catch(b){console.error("[AnkiNLM] Failed to copy CSV",b)}});const m=document.createElement("button");m.textContent="Download CSV",o(m),m.addEventListener("click",()=>{if(!r)return;const d=W(r);if(!d)return;const b=URL.createObjectURL(d),p=document.createElement("a");p.href=b,p.download="flashcards.csv",document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(b)}),e.appendChild(i),e.appendChild(m),document.body.appendChild(e)}function o(i){i.style.border="1px solid #5f6368",i.style.background="#303134",i.style.color="#fff",i.style.borderRadius="999px",i.style.padding="4px 10px",i.style.fontSize="12px",i.style.cursor="pointer"}}};function v(r,...e){}const z={debug:(...r)=>v(console.debug,...r),log:(...r)=>v(console.log,...r),warn:(...r)=>v(console.warn,...r),error:(...r)=>v(console.error,...r)};function G(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var E={exports:{}},Z=E.exports,R;function Y(){return R||(R=1,(function(r,e){(function(n,o){o(r)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Z,function(n){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)n.exports=globalThis.browser;else{const o="The message port closed before a response was received.",i=m=>{const d={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(d).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class b extends WeakMap{constructor(t,g=void 0){super(g),this.createItem=t}get(t){return this.has(t)||this.set(t,this.createItem(t)),super.get(t)}}const p=s=>s&&typeof s=="object"&&typeof s.then=="function",_=(s,t)=>(...g)=>{m.runtime.lastError?s.reject(new Error(m.runtime.lastError.message)):t.singleCallbackArg||g.length<=1&&t.singleCallbackArg!==!1?s.resolve(g[0]):s.resolve(g)},S=s=>s==1?"argument":"arguments",ee=(s,t)=>function(l,...A){if(A.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${S(t.minArgs)} for ${s}(), got ${A.length}`);if(A.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${S(t.maxArgs)} for ${s}(), got ${A.length}`);return new Promise((u,x)=>{if(t.fallbackToNoCallback)try{l[s](...A,_({resolve:u,reject:x},t))}catch(a){console.warn(`${s} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),l[s](...A),t.fallbackToNoCallback=!1,t.noCallback=!0,u()}else t.noCallback?(l[s](...A),u()):l[s](...A,_({resolve:u,reject:x},t))})},O=(s,t,g)=>new Proxy(t,{apply(l,A,u){return g.call(A,s,...u)}});let T=Function.call.bind(Object.prototype.hasOwnProperty);const k=(s,t={},g={})=>{let l=Object.create(null),A={has(x,a){return a in s||a in l},get(x,a,f){if(a in l)return l[a];if(!(a in s))return;let c=s[a];if(typeof c=="function")if(typeof t[a]=="function")c=O(s,s[a],t[a]);else if(T(g,a)){let w=ee(a,g[a]);c=O(s,s[a],w)}else c=c.bind(s);else if(typeof c=="object"&&c!==null&&(T(t,a)||T(g,a)))c=k(c,t[a],g[a]);else if(T(g,"*"))c=k(c,t[a],g["*"]);else return Object.defineProperty(l,a,{configurable:!0,enumerable:!0,get(){return s[a]},set(w){s[a]=w}}),c;return l[a]=c,c},set(x,a,f,c){return a in l?l[a]=f:s[a]=f,!0},defineProperty(x,a,f){return Reflect.defineProperty(l,a,f)},deleteProperty(x,a){return Reflect.deleteProperty(l,a)}},u=Object.create(s);return new Proxy(u,A)},F=s=>({addListener(t,g,...l){t.addListener(s.get(g),...l)},hasListener(t,g){return t.hasListener(s.get(g))},removeListener(t,g){t.removeListener(s.get(g))}}),re=new b(s=>typeof s!="function"?s:function(g){const l=k(g,{},{getContent:{minArgs:0,maxArgs:0}});s(l)}),B=new b(s=>typeof s!="function"?s:function(g,l,A){let u=!1,x,a=new Promise(y=>{x=function(h){u=!0,y(h)}}),f;try{f=s(g,l,x)}catch(y){f=Promise.reject(y)}const c=f!==!0&&p(f);if(f!==!0&&!c&&!u)return!1;const w=y=>{y.then(h=>{A(h)},h=>{let N;h&&(h instanceof Error||typeof h.message=="string")?N=h.message:N="An unexpected error occurred",A({__mozWebExtensionPolyfillReject__:!0,message:N})}).catch(h=>{console.error("Failed to send onMessage rejected reply",h)})};return w(c?f:a),!0}),se=({reject:s,resolve:t},g)=>{m.runtime.lastError?m.runtime.lastError.message===o?t():s(new Error(m.runtime.lastError.message)):g&&g.__mozWebExtensionPolyfillReject__?s(new Error(g.message)):t(g)},q=(s,t,g,...l)=>{if(l.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${S(t.minArgs)} for ${s}(), got ${l.length}`);if(l.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${S(t.maxArgs)} for ${s}(), got ${l.length}`);return new Promise((A,u)=>{const x=se.bind(null,{resolve:A,reject:u});l.push(x),g.sendMessage(...l)})},te={devtools:{network:{onRequestFinished:F(re)}},runtime:{onMessage:F(B),onMessageExternal:F(B),sendMessage:q.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:q.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},M={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return d.privacy={network:{"*":M},services:{"*":M},websites:{"*":M}},k(m,te,d)};n.exports=i(chrome)}})})(E)),E.exports}var H=Y();const $=G(H);var K=class U extends Event{static EVENT_NAME=P("wxt:locationchange");constructor(e,n){super(U.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=n}};function P(r){return`${$?.runtime?.id}:content:${r}`}function J(r){let e,n;return{run(){e==null&&(n=new URL(location.href),e=r.setInterval(()=>{let o=new URL(location.href);o.href!==n.href&&(window.dispatchEvent(new K(o,n)),n=o)},1e3))}}}var Q=class I{static SCRIPT_STARTED_MESSAGE_TYPE=P("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=J(this);receivedMessageIds=new Set;constructor(e,n){this.contentScriptName=e,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return $.runtime?.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,n){const o=setInterval(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearInterval(o)),o}setTimeout(e,n){const o=setTimeout(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearTimeout(o)),o}requestAnimationFrame(e){const n=requestAnimationFrame((...o)=>{this.isValid&&e(...o)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(e,n){const o=requestIdleCallback((...i)=>{this.signal.aborted||e(...i)},n);return this.onInvalidated(()=>cancelIdleCallback(o)),o}addEventListener(e,n,o,i){n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),e.addEventListener?.(n.startsWith("wxt:")?P(n):n,o,{...i,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),z.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:I.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){const n=e.data?.type===I.SCRIPT_STARTED_MESSAGE_TYPE,o=e.data?.contentScriptName===this.contentScriptName,i=!this.receivedMessageIds.has(e.data?.messageId);return n&&o&&i}listenForNewerScripts(e){let n=!0;const o=i=>{if(this.verifyScriptStartedEvent(i)){this.receivedMessageIds.add(i.data.messageId);const m=n;if(n=!1,m&&e?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",o),this.onInvalidated(()=>removeEventListener("message",o))}};function ie(){}function C(r,...e){}const X={debug:(...r)=>C(console.debug,...r),log:(...r)=>C(console.log,...r),warn:(...r)=>C(console.warn,...r),error:(...r)=>C(console.error,...r)};return(async()=>{try{const{main:r,...e}=V;return await r(new Q("content",e))}catch(r){throw X.error('The content script "content" crashed on startup!',r),r}})()})();
content;